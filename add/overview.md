# PolyStrike 项目总览

## 项目定位
**"长短结合、覆盖全用户层"** 的超级应用
- **左手金融 (DeFi)**: 吸引巨鲸和硬核交易者（类似 Aave/GMX）
- **右手娱乐 (GameFi)**: 吸引赌徒和直播观众（类似 Rollbit/Polymarket）

---

## 市场痛点

| 痛点 | 描述 |
|------|------|
| Web2 饰品市场的金融缺失 | 玩家手持价值数万美金的库存（如龙狙），无法对冲价格下跌风险（没有做空机制） |
| 开箱玩法的黑箱操作 | 传统开箱网站赔率不透明，存在后台操纵概率嫌疑，资金随时可能跑路 |
| Web3 预测市场的枯燥 | 现有 Polymarket 多关注政治/体育，缺乏针对 Gamers 的高频、高刺激场景 |

---

## 解决方案 (双模块架构)

```
┌─────────────────────────────────────────────────────────────┐
│                      PolyStrike                             │
├────────────────────────┬────────────────────────────────────┤
│   Module A (Price)     │       Module B (Unbox)             │
│   饰品价格预测          │       开箱直播预测                  │
├────────────────────────┼────────────────────────────────────┤
│ • 链上二元期权/衍生品   │ • 透明的彩池预测 + 无人中奖退款     │
│ • 做多/做空饰品指数     │ • 将直播流量转化为链上交易          │
│ • 低频 / 金融属性       │ • 高频 / 娱乐属性                  │
└────────────────────────┴────────────────────────────────────┘
```

---

## 用户画像

| 用户类型 | 代号 | 核心诉求 | 对应模块 | 行为特征 |
|----------|------|----------|----------|----------|
| 硬核交易者 | "The Investor" | 风险对冲、套利 | 饰品价格预测 | 理性，看K线，资金量大，关注 Oracle 准确性，低频操作 |
| 直播观众/赌徒 | "The Viewer" | 娱乐、以小博大 | 开箱直播预测 | 感性，看直播，资金量小但频次高，喜欢 Jackpot，追求瞬间快感 |
| 主播/KOL | "The Host" | 流量变现、互动 | 开箱直播预测 | 希望粉丝停留时间长，通过"带单"或"开池"获得返佣 |

---

## 数据流架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                        用户前端 (Client)                         │
│  ┌─────────────────────┐    ┌─────────────────────────────────┐ │
│  │ 界面 A: 价格趋势 K线 │    │ 界面 B: 直播 + 滚存池            │ │
│  └──────────┬──────────┘    └───────────────┬─────────────────┘ │
└─────────────┼───────────────────────────────┼───────────────────┘
              │                               │
              ▼                               ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Polygon 合约层 (Blockchain)                   │
│  ┌─────────────────────┐    ┌─────────────────────────────────┐ │
│  │ 合约 A: 价格期权池   │    │ 合约 B: 开箱 Jackpot 池          │ │
│  └──────────┬──────────┘    └───────────────┬─────────────────┘ │
│             └──────────────┬────────────────┘                   │
│                            ▼                                    │
│                    ┌───────────────┐                            │
│                    │ 资金库: USDT  │                            │
│                    └───────────────┘                            │
└─────────────────────────────────────────────────────────────────┘
              ▲                               ▲
              │                               │
┌─────────────┴───────────────────────────────┴───────────────────┐
│                      后端 Oracle (Backend)                       │
│  ┌─────────────────────┐    ┌─────────────────────────────────┐ │
│  │ 爬虫 A: Buff163 价格 │    │ 爬虫 B: 开箱结果/模拟流          │ │
│  └──────────┬──────────┘    └───────────────┬─────────────────┘ │
│             ▼                               ▼                   │
│  ┌─────────────────────┐    ┌─────────────────────────────────┐ │
│  │ 逻辑: 均价计算 VWAP  │    │ 逻辑: 结果判定 & 滚存触发        │ │
│  └──────────┬──────────┘    └───────────────┬─────────────────┘ │
│             └──────────────┬────────────────┘                   │
│                            ▼                                    │
│                 ┌─────────────────────┐                         │
│                 │ 交易发送器 (Relayer) │                         │
│                 │    EOA Wallet       │                         │
│                 └─────────────────────┘                         │
└─────────────────────────────────────────────────────────────────┘
```

---

## 技术栈

| 层级 | 技术选型 |
|------|----------|
| 区块链 | Polygon (速度快、Gas 低) |
| 智能合约 | Solidity |
| 后端 | Node.js / TypeScript |
| 数据库 | PostgreSQL + Redis |
| 前端 | React / Next.js |
| 钱包 | MetaMask, OKX Wallet (EVM) |

---

## 后端完成情况

- [x] 价格模块爬虫 + VWAP + Oracle 服务
- [x] 开箱模块 Session API + 赔率 + WebSocket
- [x] Keeper 脚本 (价格结算、开箱结算)
- [x] 用户统计/历史 API
- [x] 资产余额与交易历史 API (`/api/user/balance`, `/api/user/transactions`)

---

## 为什么这个需求组合能赢？

1. **完整生态闭环**: 不仅有娱乐小游戏 (Module B)，还有严肃的金融基础设施 (Module A)
2. **技术展示全面**:
   - Module A 展示 DeFi、Oracle 均价算法
   - Module B 展示高频交互、游戏化机制、Rollover 算法
